# Story 10.3: Incoming Bets Compact Mode

## Status
Draft

## Story
**As a** operator,
**I want** a compact incoming bets layout so I can scan more rows without losing context,
**so that** I can improve my workflow efficiency while maintaining readability of all bet information.

## Acceptance Criteria
1. A page-wide toggle persists in session state and flips `compact_mode` so vertical padding shrinks and thumbnails narrow when active.
2. Compact mode passes `compact_mode=True` to `render_bet_card`, shrinks thumbnails, and avoids layout shifts while a row is expanded or edited.
3. The toggle value survives refresh via query params/local pref so the operator does not re-enable it every visit.

## Tasks / Subtasks
- [ ] Implement compact mode toggle functionality (AC: #1)
  - [ ] Add toggle component to page toolbar
  - [ ] Wire toggle state to session state management
  - [ ] Implement vertical padding reduction logic when compact_mode is active
  - [ ] Ensure thumbnail width adjusts appropriately in compact mode
- [ ] Update bet card rendering for compact mode (AC: #2)
  - [ ] Modify `render_bet_card` to accept `compact_mode` parameter
  - [ ] Implement thumbnail width fallback logic for compact mode
  - [ ] Ensure layout stability during row expansion/editing in compact mode
  - [ ] Reference existing toggle logic at `src/ui/pages/1_incoming_bets.py:494`
- [ ] Implement persistent toggle state (AC: #3)
  - [ ] Add query parameter handling for compact mode state
  - [ ] Implement local storage/preferences for toggle persistence
  - [ ] Ensure toggle state survives page refreshes
  - [ ] Reference existing card spacing logic from `src/ui/components/bet_card.py:125`

## Dev Notes
- Maintain readability of all fields (confidence, market, odds) even though padding is reduced
- Reference existing compact mode toggle at `src/ui/pages/1_incoming_bets.py:494`
- Reference existing card spacing logic at `src/ui/components/bet_card.py:125`
- Ensure no layout shifts occur during row expansion or editing operations
- Consider responsive design implications for compact mode

### Testing
- Test file location: `tests/unit/test_media_thumbnails.py`
- Test standards: Follow existing unit test patterns in the codebase
- Testing frameworks: pytest with UI component testing
- Update `tests/unit/test_media_thumbnails.py:1` to ensure the compact layout still renders thumbnails correctly
- Test toggle state persistence across page refreshes
- Verify layout stability during row interactions in compact mode
- Test readability of all bet fields in compact mode

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|---------|
| 2025-11-10 | 1.0 | Initial story creation | Bob (Scrum Master) |

## Dev Agent Record
### Agent Model Used
<!-- To be populated by dev agent -->

### Debug Log References
<!-- To be populated by dev agent -->

### Completion Notes List
<!-- To be populated by dev agent -->

### File List
<!-- To be populated by dev agent -->

## QA Results
<!-- To be populated by QA agent -->
