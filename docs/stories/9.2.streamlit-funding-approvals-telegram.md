# Story 9.2: Streamlit Funding Approvals (Telegram Drafts)

## Status
Draft

## Story
As an admin, I want to review and approve deposit/withdrawal drafts originating from Telegram chats, so associate funding is correctly reflected in the ledger per bookmaker.

## Acceptance Criteria

- [ ] Pending Funding (Telegram) panel in Admin area
  - Columns: Created At, Associate Alias, Bookmaker, Type, Amount (native), Currency, Source Chat ID, Note
  - Source badge: `telegram`
- [ ] Actions per draft
  - [ ] Accept → create `ledger_entries` row with `bookmaker_id`
  - [ ] Reject → remove draft, no ledger write
  - [ ] Optional toggle: “Notify sender” → on Accept, send confirmation to originating chat
- [ ] Ledger write on Accept
  - Type: `DEPOSIT` or `WITHDRAWAL`
  - Amount rules: withdrawals stored as negative native
  - FX snapshot captured at approval time
  - Created_by: `local_user` or operator name if available
- [ ] UX & Validation
  - Confirm dialog before Accept/Reject
  - Error banner on DB failure
  - Empty state when no drafts
- [ ] Observability
  - Log accept/reject events with draft id and resulting ledger id
  - If notify enabled, log Telegram message id / error

## Tasks / Subtasks

- [ ] UI: Add approvals table to existing admin/operations page
- [ ] Service: Provide list/accept/reject for `funding_drafts` (DB‑backed preferred)
- [ ] Integrate FX and ledger write using existing patterns
- [ ] Telegram notifier helper (optional toggle)

## Dev Notes

- Reuse Story 5.4 patterns but extend to bookmaker‑scoped drafts and include `chat_id`
- Keep append‑only ledger invariant; no edits/deletes
- Consider persistence for drafts to avoid loss on restart

