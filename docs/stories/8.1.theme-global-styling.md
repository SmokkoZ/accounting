# Story 8.1: Foundation - Theme and Global Styling

**As a** system operator,
**I want** a modern, consistent dark theme with global styling primitives,
**so that** the application has a professional appearance and improved visual hierarchy.

## Acceptance Criteria

1. **Create `.streamlit/config.toml` with dark theme configuration**
   - Define dark base theme with high contrast colors
   - Set primary color to green (#22c55e) for success indicators
   - Configure background, panel, and text colors for accessibility
   - Use sans-serif font for readability

2. **Implement `src/ui/ui_styles.css` with card, pill, toolbar, and table styling primitives**
   - Define CSS custom properties for consistent color palette
   - Create card component with gradient background and shadow
   - Implement pill component for status indicators and badges
   - Style toolbar for action button grouping
   - Enhance table styling with sticky headers and proper row heights

3. **Create `src/ui/ui_components.py` with reusable `card()` and `metric_compact()` helpers**
   - Implement `card()` context manager for consistent content wrapping
   - Create `metric_compact()` function for key-value metric display
   - Support optional titles and subtitles for cards
   - Ensure proper HTML sanitization and cleanup

4. **Apply global CSS loading to all existing pages**
   - Update all 7 main pages to load CSS at startup
   - Ensure CSS loading happens before any Streamlit components
   - Validate no conflicts with existing styling
   - Test CSS loading in both development and production

5. **Ensure all pages use `use_container_width=True` instead of deprecated `use_column_width`**
   - Audit all pages for deprecated width parameters
   - Replace `use_column_width=` with `use_container_width=True`
   - Update any custom width logic to use new semantics
   - Test visual layout consistency across all pages

6. **Validate theme works across all existing pages without breaking functionality**
   - Test each of the 7 main workflows with new theme
   - Verify all interactive elements remain functional
   - Check color contrast for accessibility compliance
   - Validate responsive behavior on different screen sizes

## Technical Implementation Details

### Configuration Structure
```
.streamlit/
├── config.toml (theme configuration)
src/ui/
├── ui_styles.css (global styling primitives)
├── ui_components.py (reusable components)
└── pages/ (updated to load CSS)
```

### CSS Custom Properties
- `--bg`: Dark background (#0b1220)
- `--panel`: Panel background (#101826)
- `--panel2`: Secondary panel (#0e1726)
- `--text`: Primary text (#e5e7eb)
- `--muted`: Muted text (#94a3b8)
- `--border`: Border color (#1f2937)
- `--radius`: Border radius (14px)
- `--shadow`: Box shadow for depth

### Component Usage Examples
```python
# Card usage
with card("Incoming Bets", "Review and approve new bet submissions"):
    st.data_editor(bets_df)

# Metric display
metric_compact("Open Surebets", "12")
metric_compact("Unsafe", "2")
```

## Dependencies

- Streamlit ≥ 1.30 for theme support
- Existing page structure maintained
- No database changes required
- Backward compatibility with older Streamlit versions

## Success Criteria

- Professional dark theme applied consistently
- Improved visual hierarchy with clear component boundaries
- Enhanced readability with proper contrast ratios
- Reusable components reduce code duplication
- All existing functionality preserved
- Meets accessibility standards for color contrast

## Testing Requirements

- Visual regression testing on all pages
- Accessibility testing with color contrast tools
- Cross-browser compatibility testing
- Responsive design testing on various screen sizes
- Performance impact assessment
