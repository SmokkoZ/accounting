# Story 10.5: Confidence Rationale Tooltip

## Status
Draft

## Story
**As a** operator,
**I want** the confidence badge to surface its rationale using the text generated by `format_confidence_badge`,
**so that** I can understand why a row is flagged without guessing when I hover or focus the badge.

## Acceptance Criteria
1. Every confidence badge renders the tooltip text produced by the formatter, making the rationale identical to the computed value.
2. Tooltip content is keyboard accessible (aria description and focusable) and never overlaps the approve/reject buttons.
3. An accessible text node duplicates the tooltip copy for screen readers.

## Tasks / Subtasks
- [ ] Implement tooltip rendering for confidence badges (AC: #1)
  - [ ] Integrate tooltip text from `format_confidence_badge` in `src/ui/utils/formatters.py:69`
  - [ ] Inject tooltip along confidence badge render path in `src/ui/components/bet_card.py:367`
  - [ ] Ensure tooltip content matches formatter output exactly
  - [ ] Implement real-time tooltip updates when confidence changes
- [ ] Ensure accessibility and proper positioning (AC: #2)
  - [ ] Add keyboard accessibility with proper ARIA descriptions
  - [ ] Make tooltip focusable for keyboard navigation
  - [ ] Implement positioning logic to avoid overlapping approve/reject buttons
  - [ ] Add proper focus management for tooltip interactions
- [ ] Implement screen reader support (AC: #3)
  - [ ] Add accessible text node that duplicates tooltip content
  - [ ] Ensure screen reader announces confidence rationale
  - [ ] Test with various screen reader technologies
  - [ ] Provide fallback when hover is unavailable (title attribute or similar)

## Dev Notes
- Keep the copy in sync with `format_confidence_badge` so the tooltip never drifts from the formatter output
- Reference existing confidence badge implementation at `src/ui/components/bet_card.py:367`
- Reference formatter function at `src/ui/utils/formatters.py:69`
- Consider tooltip positioning constraints within card layout
- Ensure tooltip doesn't interfere with approve/reject button interactions
- Test tooltip behavior across different screen sizes and zoom levels

### Testing
- Test file location: `tests/unit/test_confidence_tooltip.py`
- Test standards: Follow existing unit test patterns in the codebase
- Testing frameworks: pytest with accessibility testing tools
- Add a unit test covering the tooltip text generation path to catch copy drift
- Test tooltip accessibility with keyboard navigation
- Verify screen reader compatibility with accessible text nodes
- Test tooltip positioning to ensure no overlap with interactive elements
- Regression test to ensure formatter output and tooltip text stay synchronized

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|---------|
| 2025-11-10 | 1.0 | Initial story creation | Bob (Scrum Master) |

## Dev Agent Record
### Agent Model Used
<!-- To be populated by dev agent -->

### Debug Log References
<!-- To be populated by dev agent -->

### Completion Notes List
<!-- To be populated by dev agent -->

### File List
<!-- To be populated by dev agent -->

## QA Results
<!-- To be populated by QA agent -->
