# Story 10.7: Keyboard Shortcuts + Help Overlay

## Status
Draft

## Story
**As a** operator,
**I want** page-specific hotkeys (A/R/E/ /?) with a help overlay so I can move through the workflow with minimal mouse travel,
**so that** I can work more efficiently and quickly access key functions.

## Acceptance Criteria
1. Page-local hotkeys (Approve=A, Reject=R, Edit=E, Search=/, Help=?) trigger the correct actions when focus is not inside an input, mirroring the focus gating used in `src/ui/pages/8_associate_operations.py:477`.
2. The help overlay, opened with ?, lists the active shortcuts, closes with Escape, and explains the Telegram shortcuts.
3. Operators can disable the hotkeys via a toggle; the state persists in session storage and is disabled when the overlay is open.
4. Unit tests assert the session flag toggles and the overlay renders the expected list of shortcuts.

## Tasks / Subtasks
- [ ] Implement keyboard shortcut functionality (AC: #1)
  - [ ] Add key capture listeners for page-local hotkeys (A, R, E, /, ?)
  - [ ] Implement focus gating to prevent triggers when inside input fields
  - [ ] Wire hotkeys to corresponding actions (Approve, Reject, Edit, Search, Help)
  - [ ] Reference existing focus gating pattern at `src/ui/pages/8_associate_operations.py:477`
  - [ ] Ensure listener hooks detach when focus moves into input fields
- [ ] Create help overlay component (AC: #2)
  - [ ] Build help overlay component with accessible labels
  - [ ] Implement overlay opening with ? key
  - [ ] Add Escape key functionality to close overlay
  - [ ] Display list of active shortcuts with descriptions
  - [ ] Include Telegram shortcuts explanations
- [ ] Implement hotkey toggle functionality (AC: #3)
  - [ ] Add hotkey toggle control in UI
  - [ ] Implement session storage persistence for toggle state
  - [ ] Disable hotkeys when overlay is open
  - [ ] Reference session-flag pattern from `src/ui/pages/8_associate_operations.py:477`
  - [ ] Ensure toggle state survives page refreshes
- [ ] Create comprehensive unit tests (AC: #4)
  - [ ] Test session flag toggling functionality
  - [ ] Verify overlay renders expected shortcut list
  - [ ] Test focus gating behavior
  - [ ] Validate hotkey disable/enable functionality
  - [ ] Test session storage persistence

## Dev Notes
- Reference existing session-flag pattern at `src/ui/pages/8_associate_operations.py:477`
- Ensure listener hooks detach when the focus moves into an input field to prevent accidental actions
- Consider keyboard shortcut conflicts with browser defaults
- Implement proper accessibility for help overlay
- Test keyboard shortcuts across different browsers
- Ensure shortcuts don't interfere with existing form inputs

### Testing
- Test file location: `tests/unit/test_keyboard_shortcuts.py`
- Test standards: Follow existing unit test patterns in the codebase
- Testing frameworks: pytest with keyboard event simulation
- Add unit tests covering the session flag toggling and overlay content
- Test hotkey functionality with focus gating
- Verify help overlay accessibility
- Test toggle state persistence in session storage
- Validate keyboard shortcut behavior across different scenarios

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|---------|
| 2025-11-10 | 1.0 | Initial story creation | Bob (Scrum Master) |

## Dev Agent Record
### Agent Model Used
<!-- To be populated by dev agent -->

### Debug Log References
<!-- To be populated by dev agent -->

### Completion Notes List
<!-- To be populated by dev agent -->

### File List
<!-- To be populated by dev agent -->

## QA Results
<!-- To be populated by QA agent -->
