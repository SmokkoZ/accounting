# Story 10.2: Coverage Proof Outbox & Resend

## Status
Draft

## Story
**As a** operator,
**I want** a Coverage Proof outbox so I can see the status of each delivery, resend when needed, and observe rate-limit cooldowns without spamming Telegram,
**so that** I can manage message delivery effectively and follow the UX guidance in `docs/front-end-spec.md:1`.

## Acceptance Criteria
1. The outbox table lists every row from `multibook_message_log` with associate_alias, chat_id, message_id, status, last_attempt, and the seconds until the next allowed send, matching the logging surface at `src/services/coverage_proof_service.py:47`.
2. Each row exposes a Resend button that calls `CoverageProofService.send` with `resend=True`, honors the cooldown at `src/services/coverage_proof_service.py:520`, disables during the wait, and surfaces success/failure toasts.
3. The UI surfaces per-chat rate-limit health (queued/blocked) and logs scrape events for analytics.
4. Inline guidance explains safe Telegram caps and why the button may be disabled (per `docs/front-end-spec.md:1`).

## Tasks / Subtasks
- [ ] Create outbox table component to display `multibook_message_log` data (AC: #1)
  - [ ] Implement table columns: associate_alias, chat_id, message_id, status, last_attempt, cooldown_timer
  - [ ] Connect to existing service that writes to `multibook_message_log`
- [ ] Implement Resend functionality with rate-limit handling (AC: #2)
  - [ ] Add Resend button to each row with disabled state during cooldown
  - [ ] Integrate with `CoverageProofService.send` using `resend=True` parameter
  - [ ] Implement spinner/toast feedback during resend operations
- [ ] Add rate-limit health indicators and analytics logging (AC: #3)
  - [ ] Display per-chat rate-limit status (queued/blocked)
  - [ ] Implement analytics logging for scrape events
- [ ] Add inline guidance and help text (AC: #4)
  - [ ] Create help section explaining Telegram rate limits
  - [ ] Add tooltips for disabled button states
  - [ ] Pull rate-limit constants from existing configuration

## Dev Notes
- Rate-limit copy should pull from existing constants so warnings stay accurate if values change
- The service layer already handles message logging to `multibook_message_log`
- Telegram section will host new tables near existing thumbnail rows
- Reference `src/services/coverage_proof_service.py` for existing cooldown logic at line 520

### Testing
- Test file location: `tests/unit/test_coverage_proof_service.py`
- Test standards: Follow existing unit test patterns in the codebase
- Testing frameworks: pytest with mock for external service calls
- Add unit tests for `src/services/coverage_proof_service.py` asserting `resend=True` uses the cooldown state
- Confirm `tests/unit/test_media_thumbnails.py:1` continues to pass even though the Telegram section will host new tables near thumbnail rows

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|---------|
| 2025-11-10 | 1.0 | Initial story creation | Bob (Scrum Master) |

## Dev Agent Record
### Agent Model Used
<!-- To be populated by dev agent -->

### Debug Log References
<!-- To be populated by dev agent -->

### Completion Notes List
<!-- To be populated by dev agent -->

### File List
<!-- To be populated by dev agent -->

## QA Results
<!-- To be populated by QA agent -->
